<!DOCTYPE html>
<!-- Copyright 2002-2013, University of Colorado Boulder -->

<html>
<head>
  <meta charset="utf-8"/>

  <title>Embedded Audio Test</title>

  <script type="text/javascript" src="../../sherpa/base64binary.js"></script>
</head>

<body>

<h1>Press the button to play the audio clip</h1>
<button onClick='play();'>Play Audio</button>

<!--Audio file is base64-->
<audio id='add-battery.mp3'
       src='data:audio/mpeg;base64,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'></audio>

<script>

  var audioContext;
  var soundSource;
  var audioBuffer;
  var webAudio;
  var sound;

  if ( 'AudioContext' in window ) {
    audioContext = new AudioContext();
    webAudio = true;
  }
  else if ( 'webkitAudioContext' in window ) {
    audioContext = new webkitAudioContext();
    webAudio = true;
  }
  else {
    webAudio = false;
  }

  /**
   * Plays the sound using the Web Audio API if available or HTML5 audio if not.
   */
  function play() {
    if ( webAudio ) {
      soundSource = audioContext.createBufferSource();
      soundSource.buffer = audioBuffer;
      soundSource.connect( audioContext.destination );

      if ( 'AudioContext' in window ) {
        soundSource.start( 0 );
      }
      else if ( 'webkitAudioContext' in window ) {
        soundSource.noteOn( 0 );
      }
    }
    else {
      sound.play();
    }
  }

  window.onload = function() {
    // Load the sound.
    sound = document.getElementById( 'add-battery.mp3' );
    if ( webAudio ) {
      var soundData = sound.getAttribute( 'src' ).replace( new RegExp( '^.*,' ), '' );
      var arrayBuff = Base64Binary.decodeArrayBuffer( soundData );
      audioContext.decodeAudioData( arrayBuff, function( audioData ) {
        audioBuffer = audioData;
      } );
    }
  }

</script>

</body>
</html>